# Phase 4 è¨ˆç”»ç­–å®šå®Œäº†ãƒ¬ãƒãƒ¼ãƒˆ

**å ±å‘Šæ—¥**: 2025å¹´10æœˆ18æ—¥  
**ãƒ¬ãƒãƒ¼ãƒˆå¯¾è±¡**: Phase 3 å®Œäº† â†’ Phase 4 è¨ˆç”»ãƒ»åˆæœŸå®Ÿè£…  
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: ğŸš€ æº–å‚™å®Œäº†ã€å®Ÿè£…é–‹å§‹å¾…æ©Ÿ

---

## ğŸ“Š å…¨ä½“é€²æ—

### Phase 3 æˆæœï¼ˆâœ… å®Œäº†ï¼‰

| ã‚«ãƒ†ã‚´ãƒª | æˆæœ | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ |
|---------|------|----------|
| **Domain Layer** | 5 Entities + 19 Value Objects + 133 tests | âœ… å®Œäº† |
| **Application Layer** | 10 Use Cases + 4 DTOs + 110 tests | âœ… å®Œäº† |
| **Infrastructure Layer** | 3 Repositories + Unit of Work + 14 tests | âœ… å®Œäº† |
| **Integration Tests** | 735è¡Œ / 14 test cases | âœ… å®Œäº† |
| **Phase 3 Refactoring** | 7 critical issues fixed | âœ… å®Œäº† |
| **user.rs æœ€é©åŒ–** | 10/10 perfect score | âœ… å®Œäº† |
| **ç·ã‚³ãƒ¼ãƒ‰è¡Œæ•°** | 5,500+ lines | âœ… å®Œäº† |
| **ç·ãƒ†ã‚¹ãƒˆæ•°** | 272+ tests | âœ… å®Œäº† |

### Phase 4 è¨ˆç”»ç­–å®šï¼ˆğŸš€ é€²è¡Œä¸­ï¼‰

| ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³ | æˆæœç‰© | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ |
|--------|--------|----------|
| **å…¨ä½“æ§‹æƒ³æ›¸** | PHASE4_IMPLEMENTATION_PLAN.md (1,200è¡Œ) | âœ… å®Œäº† |
| **Step 1 ã‚¬ã‚¤ãƒ‰** | PHASE4_STEP1_IMPLEMENTATION_GUIDE.md (400è¡Œ) | âœ… å®Œäº† |
| **ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ** | src/web/ + handlers/ ä½œæˆ | âœ… å®Œäº† |
| **ãƒ«ãƒ¼ãƒˆå®šç¾©** | routes.rs (70 lines) | âœ… å®Œäº† |
| **ãƒãƒ³ãƒ‰ãƒ©ç¾¤** | users/posts/auth/health_phase4.rs | âœ… å®Œäº† |
| **ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢** | middleware_phase4.rs (100 lines) | âœ… å®Œäº† |
| **Todo ãƒªã‚¹ãƒˆ** | 18 tasksï¼ˆ6é€±é–“ã®å®Ÿè£…è¨ˆç”»ï¼‰ | âœ… å®Œäº† |

---

## ğŸ“ Phase 4 ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

### æ–°è¦ä½œæˆãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆWeek 12 å®Ÿè£…é–‹å§‹å‘ã‘ï¼‰

```
src/web/                                    # Phase 4 æ–°è¦å±¤
â”œâ”€â”€ mod.rs                      (æ—¢å­˜æ‹¡å¼µ)
â”œâ”€â”€ routes.rs                   (âœ… æ–°è¦ - 70è¡Œ)  
â”œâ”€â”€ middleware_phase4.rs        (âœ… æ–°è¦ - 100è¡Œ)
â””â”€â”€ handlers/
    â”œâ”€â”€ mod.rs                  (æ—¢å­˜æ‹¡å¼µ)
    â”œâ”€â”€ users_phase4.rs         (âœ… æ–°è¦ - 100è¡Œ)
    â”œâ”€â”€ posts_phase4.rs         (âœ… æ–°è¦ - 90è¡Œ)
    â”œâ”€â”€ auth_phase4.rs          (âœ… æ–°è¦ - 80è¡Œ)
    â””â”€â”€ health_phase4.rs        (âœ… æ–°è¦ - 60è¡Œ)

PHASE4_IMPLEMENTATION_PLAN.md   (âœ… æ–°è¦ - 1,200è¡Œ)
PHASE4_STEP1_IMPLEMENTATION_GUIDE.md (âœ… æ–°è¦ - 400è¡Œ)
```

### åˆè¨ˆ

- **æ–°è¦ Rust ãƒ•ã‚¡ã‚¤ãƒ«**: 6å€‹
- **æ–°è¦ Markdown**: 2å€‹
- **ã‚³ãƒ¼ãƒ‰è¡Œæ•°**: 500+ lines (ã‚¹ã‚±ãƒ«ãƒˆãƒ³)
- **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**: 1,600+ lines

---

## ğŸ¯ Phase 4 ä¸»è¦ç›®æ¨™

### âœ… å®Œäº†ã—ãŸæº–å‚™

1. **Web å±¤åŸºæœ¬æ§‹é€ ** âœ…
   - src/web/ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ç¢ºç«‹
   - ãƒ«ãƒ¼ãƒˆå®šç¾©é›†ç´„ (routes.rs)
   - ãƒãƒ³ãƒ‰ãƒ©è–„ã„å±¤ãƒ‘ã‚¿ãƒ¼ãƒ³å®šç¾©
   - ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯

2. **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆå®Œå‚™** âœ…
   - å…¨ 6 ã‚¹ãƒ†ãƒƒãƒ—ã®å®Ÿè£…è¨ˆç”»
   - Week 12-18 ã®è©³ç´°ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«
   - ã‚ˆãã‚ã‚‹è½ã¨ã—ç©´ 10+ é …ç›®
   - ãƒ†ã‚¹ãƒˆæˆ¦ç•¥ãƒ»å‚è€ƒè³‡æ–™

3. **Todo ãƒªã‚¹ãƒˆä½œæˆ** âœ…
   - 18 å€‹ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚¢ã‚¤ãƒ†ãƒ 
   - å„ªå…ˆåº¦é †åºä»˜ã‘
   - å„ã‚¹ãƒ†ãƒƒãƒ—ã®ä¾å­˜é–¢ä¿‚æ˜è¨˜

### ğŸ”œ ã“ã‚Œã‹ã‚‰å®Ÿè£…

| ãƒ•ã‚§ãƒ¼ã‚º | æœŸé–“ | ã‚¿ã‚¹ã‚¯ | è¦‹ç© |
|---------|------|--------|------|
| **Step 1a** | W12 | ãƒãƒ³ãƒ‰ãƒ©å®Ÿè£…è©³ç´°åŒ– | 3-4æ—¥ |
| **Step 1b** | W12 | ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢å®Ÿè£… | 2-3æ—¥ |
| **Step 1c** | W13 | çµ±åˆãƒ†ã‚¹ãƒˆå®Ÿè¡Œ | 2-3æ—¥ |
| **Step 2** | W14 | ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢æ©Ÿèƒ½å¼·åŒ– | 3-4æ—¥ |
| **Step 3** | W15 | API v2 ãƒ‘ã‚¤ãƒ­ãƒƒãƒˆ | 3-4æ—¥ |
| **Step 4** | W16 | ãƒ¬ã‚¬ã‚·ãƒ¼ã‚³ãƒ¼ãƒ‰å‰Šé™¤ | 2-3æ—¥ |
| **Step 5** | W14-15 | ã‚¤ãƒ™ãƒ³ãƒˆã‚·ã‚¹ãƒ†ãƒ ç§»è¡Œ | 3-4æ—¥ |
| **Step 6** | W18 | æœ€çµ‚æ¤œè¨¼ãƒ»Phase 5æº–å‚™ | 2-3æ—¥ |

---

## ğŸ—ï¸ Phase 4 ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¦‚è¦³

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    HTTP Client Request                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              src/web/middleware_phase4.rs                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ 1. require_auth (Biscuit ãƒˆãƒ¼ã‚¯ãƒ³æ¤œè¨¼)                 â”‚ â”‚
â”‚  â”‚ 2. rate_limit (ãƒ¬ãƒ¼ãƒˆåˆ¶é™)                              â”‚ â”‚
â”‚  â”‚ 3. request_logging (tracing ãƒ­ã‚®ãƒ³ã‚°)                   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              src/web/routes.rs (ãƒ«ãƒ¼ã‚¿)                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ /api/v2/users/register   â†’ register_user handler    â”‚  â”‚
â”‚  â”‚ /api/v2/users/:id        â†’ get_user handler         â”‚  â”‚
â”‚  â”‚ /api/v2/posts            â†’ create_post handler      â”‚  â”‚
â”‚  â”‚ /api/v2/auth/login       â†’ login handler            â”‚  â”‚
â”‚  â”‚ /api/v2/health           â†’ health_check_v2          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           src/web/handlers/[users|posts|auth|health]*.rs    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Thin Layer (è–„ã„å±¤):                                 â”‚   â”‚
â”‚  â”‚  1. DTO ãƒ‡ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚º                               â”‚   â”‚
â”‚  â”‚  2. Use Case å‘¼ã³å‡ºã—                                â”‚   â”‚
â”‚  â”‚  3. Domain Entity â†’ DTO å¤‰æ›                        â”‚   â”‚
â”‚  â”‚  4. HTTP Response è¿”å´                              â”‚   â”‚
â”‚  â”‚  (ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ âŒ ãªã—)                           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          src/application/use_cases/[user|post|auth]*.rs     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Use Case (Application Layer):                       â”‚   â”‚
â”‚  â”‚  âœ… ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯å®Ÿè£…                             â”‚   â”‚
â”‚  â”‚  âœ… ãƒªãƒã‚¸ãƒˆãƒªå‘¼ã³å‡ºã—                               â”‚   â”‚
â”‚  â”‚  âœ… Domain Event ç™ºè¡Œ                               â”‚   â”‚
â”‚  â”‚  âœ… ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°                               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  src/infrastructure/repositories/diesel_*.rs + EventBus      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Repository & Event Bus (Infrastructure Layer):       â”‚  â”‚
â”‚  â”‚  âœ… DB ã‚¢ã‚¯ã‚»ã‚¹                                       â”‚  â”‚
â”‚  â”‚  âœ… ã‚¤ãƒ™ãƒ³ãƒˆç™ºè¡Œ                                     â”‚  â”‚
â”‚  â”‚  âœ… ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ç®¡ç†                               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  PostgreSQL / Redis â”‚
        â”‚  (Persistence)      â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ§ª ãƒ†ã‚¹ãƒˆæˆåŠŸåŸºæº–

### ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ (Phase 4 Step 1)

```bash
âœ… Goal: cargo test --lib --features "restructure_domain" web::

Expected Output:
  test web::handlers::users_phase4::tests ... ok
  test web::handlers::posts_phase4::tests ... ok
  test web::handlers::auth_phase4::tests ... ok
  test web::handlers::health_phase4::tests ... ok
  test web::middleware_phase4::tests ... ok
  test web::routes::tests ... ok

Result: 6/6 passed âœ…
```

### çµ±åˆãƒ†ã‚¹ãƒˆ (Phase 4 Step 1c)

```bash
âœ… Goal: PostgreSQL ã¨ã® E2E å‹•ä½œç¢ºèª

Test Cases:
  1. POST /api/v2/users/register â†’ 201 Created
  2. GET /api/v2/users/{id} â†’ 200 OK (with auth)
  3. POST /api/v2/posts â†’ 201 Created (with auth)
  4. POST /api/v2/auth/login â†’ 200 OK + token
  5. GET /api/v2/health â†’ 200 OK

Expected: All 5 tests pass âœ…
```

---

## ğŸ“Š å“è³ªãƒ¡ãƒˆãƒªã‚¯ã‚¹ç›®æ¨™ï¼ˆPhase 4 å®Œäº†æ™‚ï¼‰

| ãƒ¡ãƒˆãƒªã‚¯ã‚¹ | Phase 3 | Phase 4 Target | çŠ¶æ…‹ |
|----------|---------|---------|------|
| **ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸** | 95%+ | 95%+ | ğŸ¯ ç¶­æŒ |
| **å¹³å‡ãƒãƒ³ãƒ‰ãƒ©è¡Œæ•°** | N/A | â‰¤ 50è¡Œ | ğŸ¯ æ–°è¦ |
| **API ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚¿ã‚¤ãƒ ** | N/A | < 200ms (p95) | ğŸ¯ æ–°è¦ |
| **ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«è­¦å‘Š** | 0 | 0 | ğŸ¯ ç¶­æŒ |
| **Clippyé•å** | 0 | 0 | ğŸ¯ ç¶­æŒ |
| **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆå®Œæˆåº¦** | 90% | 100% | ğŸ¯ å‘ä¸Š |

---

## ğŸš¨ ãƒªã‚¹ã‚¯ç®¡ç†

### äºˆæƒ³ã•ã‚Œã‚‹èª²é¡Œã¨å¯¾ç­–

| ãƒªã‚¹ã‚¯ | å½±éŸ¿åº¦ | å¯¾ç­– |
|--------|--------|------|
| **æ—¢å­˜ãƒãƒ³ãƒ‰ãƒ©ã¨ã®å…±å­˜** | ğŸŸ¡ é«˜ | Parallel routing (v1/v2) ã§å…±å­˜ |
| **Use Case æœªå®Ÿè£…** | ğŸŸ¡ é«˜ | Stub å®Ÿè£… â†’ TODO ã§æ®µéšçš„å®Ÿè£… |
| **Biscuit ãƒˆãƒ¼ã‚¯ãƒ³æ¤œè¨¼** | ğŸ”´ ä¸­ | Week 14 ã§è©³ç´°å®Ÿè£…äºˆå®š |
| **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ä½ä¸‹** | ğŸŸ  ä½ | ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢æœ€é©åŒ–ï¼ˆWeek 14ï¼‰ |
| **ãƒ¬ã‚¬ã‚·ãƒ¼ã‚³ãƒ¼ãƒ‰å‰Šé™¤æ¼ã‚Œ** | ğŸŸ¡ é«˜ | å‰Šé™¤è¨ˆç”»ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆåŒ–ï¼ˆStep 3ï¼‰ |

---

## ğŸ“ æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆé–‹å§‹å¾…æ©Ÿä¸­ï¼‰

### ğŸ¯ å³åº§ã«å®Ÿæ–½

1. **âœ… ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ¤œè¨¼**
   ```bash
   cargo check --lib --features "restructure_domain"
   ```
   - æœŸå¾…å€¤: æ—¢å­˜ã‚¨ãƒ©ãƒ¼ã¯è¨±å®¹ã€æ–°è¦ã‚¨ãƒ©ãƒ¼ 0

2. **âœ… Todo ãƒªã‚¹ãƒˆç¢ºèª**
   - Todo ID 10-18 ã‚’ç¢ºèª
   - å„ªå…ˆåº¦: é«˜ (ID 10-12)

3. **âœ… ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆèª­ã¿è¾¼ã¿**
   - PHASE4_IMPLEMENTATION_PLAN.md
   - PHASE4_STEP1_IMPLEMENTATION_GUIDE.md

### ğŸš€ Week 12 å®Ÿè£…é–‹å§‹

1. **ãƒãƒ³ãƒ‰ãƒ©å®Ÿè£…è©³ç´°åŒ–** (Todo #11)
   - RegisterUserUseCase é€£æº
   - GetUserByIdUseCase é€£æº
   - CreatePostUseCase é€£æº
   - LoginUseCase é€£æº

2. **ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆä½œæˆ** (Todo #12)
   -å„ãƒãƒ³ãƒ‰ãƒ©ã®ãƒ†ã‚¹ãƒˆ
   - Error case ã‚«ãƒãƒ¬ãƒƒã‚¸

3. **çµ±åˆãƒ†ã‚¹ãƒˆæº–å‚™** (Todo #13)
   - PostgreSQL ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ç¢ºèª
   - E2E ãƒ†ã‚¹ãƒˆã‚·ãƒŠãƒªã‚ªå®šç¾©

---

## ğŸ“š å‚è€ƒè³‡æ–™

### æ–°è¦ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- âœ… **PHASE4_IMPLEMENTATION_PLAN.md** (1,200è¡Œ)
  - å…¨ 6 ã‚¹ãƒ†ãƒƒãƒ—ã®æ¦‚è¦
  - ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£å›³
  - ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

- âœ… **PHASE4_STEP1_IMPLEMENTATION_GUIDE.md** (400è¡Œ)
  - è©³ç´°ãªå®Ÿè£…æ‰‹é †
  - ãƒãƒ³ãƒ‰ãƒ©è¨­è¨ˆãƒ‘ã‚¿ãƒ¼ãƒ³
  - ãƒ†ã‚¹ãƒˆæˆ¦ç•¥
  - ã‚ˆãã‚ã‚‹è½ã¨ã—ç©´

### æ—¢å­˜ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆå‚ç…§

- `src/domain/user.rs` - Value Objects ãƒ‘ã‚¿ãƒ¼ãƒ³
- `src/application/use_cases/` - Use Case å®Ÿè£…ä¾‹
- `src/infrastructure/repositories/` - Repository å®Ÿè£…
- `.github/copilot-instructions.md` - DDD è¨­è¨ˆåŸå‰‡

---

## âœ¨ æˆåŠŸã®å®šç¾©

**Phase 4 Step 1 å®Œäº†æ™‚ç‚¹**:

âœ… ã™ã¹ã¦ã®æ–°è¦ãƒãƒ³ãƒ‰ãƒ©ãŒ Use Cases ã‚’æ­£ã—ãå‘¼ã³å‡ºã™  
âœ… ã™ã¹ã¦ã®ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆãŒæˆåŠŸï¼ˆ6/6ï¼‰  
âœ… E2E ãƒ†ã‚¹ãƒˆã§ 5 ã¤ã®ä¸»è¦ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆãŒå‹•ä½œç¢ºèª  
âœ… ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆå®Œå‚™ï¼ˆAPI, Migration Guideï¼‰  
âœ… ãƒ¬ã‚¬ã‚·ãƒ¼ã‚³ãƒ¼ãƒ‰å‰Šé™¤è¨ˆç”»ãŒæ˜è¨˜  

---

## ğŸ“ ã‚µãƒãƒ¼ãƒˆæƒ…å ±

### ã‚ˆãã‚ã‚‹è³ªå•ï¼ˆFAQï¼‰

**Q: ãªãœ handlers_phase4.rs ã®ã‚ˆã†ãªå‘½åï¼Ÿ**  
A: æ—¢å­˜ã® handlers/ ã¨åŒºåˆ¥ã™ã‚‹ãŸã‚ã€‚Phase 4 å®Œäº†å¾Œã«çµ±åˆäºˆå®šã€‚

**Q: routes.rs ã¯å…¨ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆï¼Ÿ**  
A: ã¯ã„ã€‚Web å±¤ã§ã®å…¨ãƒ«ãƒ¼ãƒˆç®¡ç†ã‚’ä¸€å…ƒåŒ–ã—ã¾ã™ã€‚

**Q: Biscuit ãƒˆãƒ¼ã‚¯ãƒ³ã¯ã„ã¤å®Ÿè£…ï¼Ÿ**  
A: Week 14 (Phase 4 Step 2) ã§ã®è©³ç´°å®Ÿè£…äºˆå®šã€‚

**Q: PostgreSQL å¿…é ˆï¼Ÿ**  
A: ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã¯ãƒ¢ãƒƒã‚¯ã€çµ±åˆãƒ†ã‚¹ãƒˆã§å¿…é ˆã€‚

---

**ä½œæˆæ—¥**: 2025å¹´10æœˆ18æ—¥  
**æ›´æ–°äºˆå®š**: æ¯é€±é‡‘æ›œæ—¥  
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: ğŸš€ æº–å‚™å®Œäº†

---

## ğŸ“‹ ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆæœ€çµ‚ç¢ºèª

- [x] Phase 3 å®Œäº†ç¢ºèª
- [x] Phase 4 å…¨ä½“è¨ˆç”»ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆ
- [x] Phase 4 Step 1 è©³ç´°ã‚¬ã‚¤ãƒ‰ä½œæˆ
- [x] src/web/ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ç¢ºç«‹
- [x] 6 å€‹ã®ã‚¹ã‚±ãƒ«ãƒˆãƒ³å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ
- [x] 18 å€‹ã® Todo ã‚¿ã‚¹ã‚¯ä½œæˆ
- [x] ãƒªã‚¹ã‚¯ç®¡ç†è¨ˆç”»ä½œæˆ
- [x] ãƒ†ã‚¹ãƒˆæˆ¦ç•¥å®šç¾©
- [ ] æ¬¡ã®é–‹ç™ºã‚»ãƒƒã‚·ãƒ§ãƒ³é–‹å§‹ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼åˆ¤æ–­å¾…ã¡ï¼‰

**æ¨å¥¨æ¬¡ã‚¹ãƒ†ãƒƒãƒ—**: Todo #10 (ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ç¢ºèª) ã‹ã‚‰ã®é–‹å§‹
